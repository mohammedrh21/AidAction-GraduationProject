@page "/MainWebsite/About"
@layout MainLayout
@inject IMainWebsite _Main
@inject IJSRuntime JS
@inject NavigationManager _Nav

<PageTitle>About</PageTitle>

<!-- About Donation Platform Section -->
<section class="about-donation-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="p-4 bg-white shadow-sm rounded">
                    <h6 class="text-success fw-semibold mb-2">How It Started</h6>
                    <h2 class="fw-bold mb-3" style="font-size: 2rem">
                        @website.Title
                    </h2>
                    <p class="text-muted">
                        @website.AboutCamp
                    </p>
                </div>
                <div class="row text-center mt-0 g-3">
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <h3 class="text-success fw-bold">5+</h3>
                            <p class="text-muted mb-0">Years of Giving</p>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <h3 class="text-success fw-bold">@website.CompletedCampaign+</h3>
                            <p class="text-muted mb-0">Campaigns Completed</p>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <h3 class="text-success fw-bold">@website.DonorsNum+</h3>
                            <p class="text-muted mb-0">Monthly Donors</p>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <h3 class="text-success fw-bold">50K</h3>
                            <p class="text-muted mb-0">Lives Impacted</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <img src="@website.ImagePath"
                     alt="About us"
                     class="img-fluid rounded" />
            </div>
        </div>
    </div>
</section>

@code {
    public WebsiteDetails website { get; set; } = new WebsiteDetails();

    protected override async Task OnInitializedAsync()
    {
        await WebsiteDetailsSelectAsync();
    }

    public async Task WebsiteDetailsSelectAsync()
    {

        var result = await _Main.WebsiteDetailsSelectAsync();
        var resultDataList = Newtonsoft.Json.JsonConvert.DeserializeObject<List<Result<List<WebsiteDetails>>>>(result.ToString());

        // Get the first item from the list (since it’s an array in the JSON root)
        var resultData = resultDataList.FirstOrDefault();

        // Check if the result is not null
        if (resultData != null)
        {
            // Access the list of WebsiteDetails
            List<WebsiteDetails> websiteDetailsList = resultData.Data;
            website = websiteDetailsList.FirstOrDefault();
        }
        StateHasChanged(); // Trigger re-render to update UI with the new data
    }
}